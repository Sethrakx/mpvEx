{
  "name": "MPV Configuration",
  "scopeName": "source.conf",
  "patterns": [
    { "include": "#comment" },
    { "include": "#profile" },
    { "include": "#option-line" }
  ],
  "repository": {
    "comment": {
      "patterns": [
        {
          "match": "^\\s*#.*$",
          "name": "comment.line.number-sign.conf",
          "captures": {
            "0": { "name": "comment.line.number-sign.conf" }
          }
        }
      ]
    },
    "profile": {
      "patterns": [
        {
          "match": "^\\s*(\\[)([^\\]]+)(\\])\\s*$",
          "name": "meta.section.profile.conf",
          "captures": {
            "1": { "name": "punctuation.definition.section.begin.conf" },
            "2": { "name": "entity.name.section.conf" },
            "3": { "name": "punctuation.definition.section.end.conf" }
          }
        }
      ]
    },
    "option-line": {
      "patterns": [
        {
          "comment": "key=value with -- prefix",
          "begin": "^\\s*(-{0,2})([a-zA-Z][a-zA-Z0-9_-]*)\\s*(=)",
          "beginCaptures": {
            "1": { "name": "punctuation.definition.option.conf" },
            "2": { "name": "variable.other.option.conf" },
            "3": { "name": "keyword.operator.assignment.conf" }
          },
          "end": "(?=\\s+[a-zA-Z-]+=|$)",
          "patterns": [{ "include": "#value" }]
        },
        {
          "comment": "Continuation key=value on same line",
          "begin": "\\s+(-{0,2})([a-zA-Z][a-zA-Z0-9_-]*)\\s*(=)",
          "beginCaptures": {
            "1": { "name": "punctuation.definition.option.conf" },
            "2": { "name": "variable.other.option.conf" },
            "3": { "name": "keyword.operator.assignment.conf" }
          },
          "end": "(?=\\s+[a-zA-Z-]+=|$)",
          "patterns": [{ "include": "#value" }]
        },
        {
          "comment": "no-prefixed flag (e.g. no-osd-bold)",
          "match": "^\\s*(-{0,2})(no-)([a-zA-Z][a-zA-Z0-9_-]*)\\s*$",
          "captures": {
            "1": { "name": "punctuation.definition.option.conf" },
            "2": { "name": "keyword.operator.negation.conf" },
            "3": { "name": "variable.other.option.conf" }
          }
        },
        {
          "comment": "Standalone bool flag (e.g. fullscreen)",
          "match": "^\\s*(-{0,2})([a-zA-Z][a-zA-Z0-9_-]*)\\s*$",
          "captures": {
            "1": { "name": "punctuation.definition.option.conf" },
            "2": { "name": "variable.other.option.conf" }
          }
        }
      ]
    },
    "value": {
      "patterns": [
        {
          "comment": "Double-quoted string",
          "begin": "\"",
          "beginCaptures": {
            "0": { "name": "punctuation.definition.string.begin.conf" }
          },
          "end": "\"",
          "endCaptures": {
            "0": { "name": "punctuation.definition.string.end.conf" }
          },
          "name": "string.quoted.double.conf"
        },
        {
          "comment": "Single-quoted string",
          "begin": "'",
          "beginCaptures": {
            "0": { "name": "punctuation.definition.string.begin.conf" }
          },
          "end": "'",
          "endCaptures": {
            "0": { "name": "punctuation.definition.string.end.conf" }
          },
          "name": "string.quoted.single.conf"
        },
        {
          "comment": "Boolean / auto values",
          "match": "\\b(yes|no|true|false|auto|auto-safe)\\b",
          "name": "constant.language.boolean.conf"
        },
        {
          "comment": "Float numbers",
          "match": "(?<![a-zA-Z])-?\\d+\\.\\d+",
          "name": "constant.numeric.float.conf"
        },
        {
          "comment": "Integer numbers",
          "match": "(?<![a-zA-Z])-?\\d+",
          "name": "constant.numeric.integer.conf"
        },
        {
          "comment": "Unquoted value text (paths, comma-lists, etc.)",
          "match": "[^\\s#\"']+",
          "name": "string.unquoted.value.conf"
        }
      ]
    }
  }
}
